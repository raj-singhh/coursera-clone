<div class="home-container">
  <section class="hero-section">
    <div class="container">
      <h1>Welcome to Coursera Clone</h1>
      <p>Your gateway to knowledge and skill development. Explore thousands of courses from top instructors.</p>
      <a routerLink="/courses" class="btn btn-primary">Explore Courses</a>
    </div>
  </section>

  <main class="container">
    <ng-container *ngIf="showLogin || showRegister">
      <app-login *ngIf="showLogin && !(isLoggedIn$ | async)"
                 (switchToRegister)="showRegisterFormInternal()"
                 (loginSuccess)="onLoginSuccess()">
      </app-login>

      <app-register *ngIf="showRegister && !(isLoggedIn$ | async)"
                    (switchToLogin)="showLoginFormInternal()"
                    (registerSuccess)="onRegisterSuccess()">
      </app-register>
    </ng-container>

    <ng-container *ngIf="!showLogin && !showRegister">
      <h2 class="section-title">
        {{ showMyCourses ? 'My Enrolled Courses' : 'Available Courses' }}
      </h2>

      <div *ngIf="(showMyCourses && enrolledCourses.length === 0 && (isLoggedIn$ | async)) || (!showMyCourses && allCourses.length === 0)" class="no-courses-message">
        <p *ngIf="showMyCourses && (isLoggedIn$ | async)">You are not enrolled in any courses yet.</p>
        <p *ngIf="!showMyCourses && allCourses.length === 0">No courses available. Please check back later.</p>
        <button *ngIf="showMyCourses && (isLoggedIn$ | async)" (click)="viewAllCoursesInternal()" class="btn btn-primary">
          Browse All Courses
        </button>
      </div>

      <div class="course-grid">
        <div *ngFor="let course of (showMyCourses ? enrolledCourses : allCourses)" class="course-card">
          <a [routerLink]="['/courses', course.id]">
            <img [src]="course.thumbnailUrl" [alt]="course.title" class="course-thumbnail">
          </a>
          <div class="course-content">
            <h3 class="course-title">
              <a [routerLink]="['/courses', course.id]">{{ course.title }}</a>
            </h3>
            <p class="course-description">{{ course.description }}</p>
            <div class="course-meta">
              <span class="course-price">â‚¹{{ course.price }}</span>
              <ng-container *ngIf="!showMyCourses">
                <button *ngIf="!isCourseEnrolled(course.id)" (click)="onPurchaseCourse(course.id)" class="btn btn-primary">
                  Purchase
                </button>
                <span *ngIf="isCourseEnrolled(course.id)" class="enrolled-badge">Enrolled</span>
              </ng-container>
              <span *ngIf="showMyCourses" class="enrolled-badge">Enrolled</span>
            </div>
          </div>
        </div>
      </div>

      <h2 class="section-title">Course Price Distribution</h2>
      <div class="chart-container">
        <canvas id="priceDistributionChart"></canvas>
      </div>
    </ng-container>
  </main>
</div>
